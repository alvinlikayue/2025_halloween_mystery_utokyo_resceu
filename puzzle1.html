<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>🎩《重力波探偵団》第1話 光の交差点（KAGRA）</title>
  <link rel="stylesheet" href="css/common.css" />
</head>
<body>
  <canvas id="stars"></canvas>

  <div class="container">
    <h1>🎩《重力波探偵団》第1話　光の交差点（KAGRA）</h1>

    <div class="scene">
      <p>夜の帝都。満月が街を照らすころ、喫茶ポアロの店内に不思議な静寂が流れていた。</p>
      <p>その時――店の窓を、ひらりと白いハトが横切り、一通の封筒がテーブルの上に舞い落ちた。</p>
      <p>歩美：「あっ！ 手紙が降ってきた！」<br>
         元太：「うまそうなにおいしねぇけど？」<br>
         光彦：「いや、見て！ 宛名が……“江戸川コナン様”！」</p>
      <p>封筒は真っ白な紙に、月光を反射する銀色のインクで文字が刻まれている。<br>
         『To the Little Detective who sees through the dark』（闇を見抜く小さな探偵へ）</p>
      <p>コナンは静かにそれを手に取り、封を切った。</p>
    </div>

    <div class="letter">
      <h2>💌 怪盗キッドの予告状</h2>
      <p>「次にいただくのは、“宇宙中で一番優しい声”。ヒントをあげます。<br>
         赤い線のときは東大、紺色の線のときは富山。<br>
         では、緑の線のときは？」<br>
         ――月下の奇術師より 🌙</p>
    </div>

    <div class="scene">
      <p>阿笠博士：「ほっほっ、相変わらず詩人じゃのぉ、あの泥棒は！」<br>
         灰原：「赤い線が東大、紺が富山……じゃあ緑は何を意味してるのかしら？」<br>
         コナン：「東大……富山……」</p>
      <p>コナンはテーブルに図を広げた。そこには三本の線――赤、青、緑が、交わるように描かれていた。</p>

      <h3>🧩 謎そのいち：光の交差点</h3>
      <p>赤い線のときは「東大」、紺色線のときは「富山」。<br>
         では、緑の線のときは何？</p>

      <div class="puzzle-image">
        <img src="images/puzzle1.png" alt="第1問の謎（五十音表）" />
      </div>

      <div class="controls">
        <input type="text" id="answer" placeholder="答えを入力してください…" />
        <button class="btn btn-primary" onclick="checkAnswer1()">送信</button>
        <button class="btn btn-hint" onclick="showHint1()">ヒント</button>
        <button class="btn btn-answer" onclick="showAnswer1()">答えを見る</button>
      </div>

      <p id="message"></p>
      <p id="hint" class="hint"></p>

      <div id="explanation" class="explain">
        <h3>🧩 謎の構造</h3>
        <p>この表は五十音表（あいうえお表）。縦は「行（あ・か・さ・た・な…）」、横は「段（a・i・u・e・o）」を表している。</p>
        <p>線は、それぞれ音の位置をたどって、日本語の言葉を描いていた。</p>
        <ul>
          <li>🔴 赤い線：「と → う → だ → い」＝東大</li>
          <li>🔵 紺色線：「と → や → ま」＝富山</li>
          <li>🟢 緑色線：「か → ぐ → ら」＝KAGRA</li>
        </ul>
        <p><strong>コナン：</strong>「……“か → ぐ → ら”。 緑の線は『KAGRA（かぐら）』だ！」</p>
      </div>

      <div id="ending">
        <h3>🌙 結論と旅立ち</h3>
        <p>灰原：「KAGRA……聞いたことがあるような、ないような。」<br>
           コナン：「“見えない宇宙の声”を捕まえる施設――キッドが言いたかったのは、きっとそこだ。」<br>
           阿笠：「ほっほっ、まさかコナンくん、そこへ行くつもりか？」<br>
           コナン：「ああ。キッドが次に現れるのは、富山の山奥……“KAGRA”だ。」</p>
        <p>歩美：「行こうよ！ 探偵団の出番だね！」<br>
           光彦：「科学の謎に挑むなんて、わくわくします！」<br>
           元太：「オレ、おにぎり持ってくぞ！」<br>
           灰原：「まったく……あなたたち、ほんとに行く気なのね。」<br>
           <em>コナン（心の声）：「宇宙中一番優しい声？　一体、キッドは何を狙ってるんだ？」</em></p>
        <div class="next">
          <a href="puzzle2.html">▶ 第2話へ：波のひみつ（重力波）</a>
        </div>
      </div>
    </div>
  </div>

  <script src="js/common.js"></script>
  <script>
    // ==== Puzzle 1 専用スクリプト ====
    const hints1 = [
      "🔍 ヒント①：線は“文字”ではなく“音”をたどっているようだ。読んでみると何かの言葉になるかも？",
      "🧭 ヒント②：赤い線は『と→う→だ→い』（東大）、紺の線は『と→や→ま』（富山）。",
      "🌌 ヒント③：緑の線は『か→ぐ→ら』。富山の山奥にある観測施設――KAGRA！"
    ];

    function showHint1() {
      showHint(hints1);
    }

    function checkAnswer1() {
      const input = document.getElementById("answer").value.trim();
      const msg = document.getElementById("message");
      if (!input) {
        msg.style.color = "#ccc";
        msg.textContent = "答えを入力してください。";
        return;
      }
      if (["KAGRA", "かぐら", "カグラ"].includes(input)) {
        msg.style.color = "#00ffcc";
        msg.textContent = "🎉 正解！ 緑の線は『KAGRA』だ！";
        setTimeout(revealExplanation, 1000);
      } else {
        msg.style.color = "#ff6666";
        msg.textContent = "残念…もう一度考えてみよう。";
      }
    }

    function showAnswer1() {
      kidReveal([
        "🎩『フッ……探偵くん、線の意味は見抜けたかな？』",
        "🌙『赤は東大、紺は富山。そして緑は――』",
        "💎『“KAGRA（かぐら）”。それが答えさ。』"
      ]);
    }
  </script>
</body>
</html>

