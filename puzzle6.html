<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>🌌《宇宙で一番優しい音》第6話　方向の法則（ほうこうのほうそく）</title>
  <link rel="stylesheet" href="css/common.css" />
</head>
<body>
  <canvas id="stars"></canvas>

  <div class="container">
    <h1>🌌《宇宙で一番優しい音》第6話　方向の法則（ほうこうのほうそく）</h1>

    <!-- Scene 1：最後の挑戦状 -->
    <div class="story">
      <p>これまでの謎をすべて解き明かした翌朝。<br>
      コナンたちのもとに、また予告状が届いた。</p>
    </div>

    <div class="scene-visual" style="background-image:url('images/bg_tokyo_night.jpg');">
      <div class="dialogue left">
        <img src="images/haibara.png" alt="灰原" class="char-face">
        <div class="speech">
          <div class="char-name haibara">灰原</div>
          <p>……また来たわね。</p>
        </div>
      </div>
      <div class="dialogue right">
        <img src="images/conan.png" alt="コナン" class="char-face">
        <div class="speech">
          <div class="char-name conan">コナン</div>
          <p>“方向を読め”……か。今回もルールを見抜けば解けるはずだ。</p>
        </div>
      </div>
    </div>

    <!-- 予告状 -->
    <div class="letter">
      <h2>💌 怪盗キッドの予告状</h2>
      <p>最後の鍵は、“宇宙の方向”にある。<br>
      すべての矢印が示す方角を読み解けば、<br>
      ひとつの答えが導かれるだろう。</p>
      <p>――月下の奇術師より 🌙</p>
    </div>

    <!-- 謎の図 -->
    <div class="story">
      <p>テーブルの上に置かれたのは、赤と青の矢印が入り混じる奇妙な図だった。</p>
    </div>

    <div class="puzzle-image">
      <img src="images/puzzle6_jp.png" alt="方向の法則パズル図" />
    </div>

    <!-- 入力UI -->
    <div class="controls">
      <input type="text" id="answer" placeholder="6文字の答えを入力…" />
      <button class="btn btn-primary" onclick="checkAnswer6()">送信</button>
      <button class="btn btn-hint" onclick="showHint6()">ヒント</button>
      <button class="btn btn-answer" onclick="showAnswer6()">答えを見る</button>
    </div>

    <p id="message"></p>
    <p id="hint" class="hint"></p>

    <!-- 解説（※正解後に表示） -->
    <div id="explanation" class="explain" style="display:none;">
      <h3>🧩 解説</h3>
      <p>赤と青の矢印は、それぞれ異なる種類の「方向」を示していた。</p>
      <ul>
        <li>❤️ 赤い矢印：立体の向き（Up / Down / Left / Right）</li>
        <li>💙 青い矢印：コンパスの方位（North / East / South / West）</li>
      </ul>
      <p>各段（横一列）で、矢印の示す英単語の頭文字を並べると…</p>
      <ul>
        <li>1段目 → Right, East, South, T → <code>REST</code></li>
        <li>2段目 → Down, O, West, North → <code>DOWN</code></li>
        <li>3段目 → Right, East, South, C, East, Up → <code>RESCEU</code></li>
      </ul>
      <p>これが、キッドの言う“宇宙の方向”の鍵だった。</p>
    </div>

    <!-- エンディング（※正解後に表示） -->
    <div id="ending" class="story" style="display:none;">
      <p>天井に光が交差し、白い羽がゆっくりと舞い落ちた。</p>
      <blockquote>
        「地の底で休み、深く潜り、そして空を見上げよ。<br>
         その先に、君の探す“はじまり”がある。」
      </blockquote>

      <div class="scene-visual" style="background-image:url('images/bg_night_lab.jpg');">
        <div class="dialogue left">
          <img src="images/haibara.png" alt="灰原" class="char-face">
          <div class="speech">
            <div class="char-name haibara">灰原</div>
            <p>RESCEUって、ある“場所”ってことね。</p>
          </div>
        </div>
        <div class="dialogue right">
          <img src="images/conan.png" alt="コナン" class="char-face">
          <div class="speech">
            <div class="char-name conan">コナン</div>
            <p>ああ。“方向”が指し示した先に、最終謎が待ってるはずだ。それは、東京大学のビックバン宇宙研究センターRESCEUだよな。</p>
          </div>
        </div>
      </div>

      <div class="next">
        <a href="puzzle7.html">▶ 最終謎へ</a>
      </div>
    </div>
  </div>

  <script src="js/common.js"></script>
  <script>
    // ==== 第6話：方向の法則 ====
    const hints6 = [
      "💡 ヒント①：赤と青の矢印は同じ“方向”ではない。役割が違う。",
      "🧭 ヒント②：❤️赤＝立体の向き（上/下/右/左）、💙青＝方位（北/東/南/西）。段ごとに頭文字を読む。",
      "🌌 ヒント③：1段目は「休む」を意味する英単語になる。そこから規則を確かめよう。"
    ];
    function showHint6(){ showHint(hints6); }

    function checkAnswer6(){
      const input = (document.getElementById("answer").value || "").trim().toUpperCase();
      const msg = document.getElementById("message");
      if(!input){
        msg.style.color="#ccc"; msg.textContent="答えを入力してください。"; return;
      }
      if(input === "RESCEU"){
        msg.style.color="#00ffcc";
        msg.textContent="🎉 正解！ 矢印が指し示していた6文字に辿りついた！";
        setTimeout(revealExplanation, 900);
      } else {
        msg.style.color="#ff6666";
        msg.textContent="もう一度、赤＝立体/青＝方位 を段ごとに見直してみよう。";
      }
    }

    function showAnswer6(){
      kidReveal([
        "🎩『方向を読むんだ、探偵くん。』",
        "🧭『赤は立体の動き、青はコンパスの方角。』",
        "🌙『そして導かれる6文字は……RESCEU。』"
      ]);
    }
  </script>
</body>
</html>
