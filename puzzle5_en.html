<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ”­ The Most Beautiful Sound in the Universe â€” Episode 5: The End of the Labyrinth</title>
  <link rel="stylesheet" href="css/common.css" />
</head>
<body>
  <canvas id="stars"></canvas>

  <div class="container">
    <h1>ğŸ”­ The Most Beautiful Sound in the Universe â€” Episode 5: The End of the Labyrinth</h1>

    <!-- ğŸŒŒ Scene 1: The Arrival of the Black Card -->
    <p>The night after solving the mystery of â€œlightâ€ at KAGRA,<br>
    a black card arrived at the Detective Boysâ€™ lab.</p>

    <div class="scene-visual" style="background-image:url('images/bg_night_lab.jpg');">
      <div class="dialogue left">
        <img src="images/haibara.png" alt="Haibara" class="char-face">
        <div class="speech">
          <div class="char-name haibara">Haibara</div>
          <p><em>â€¦From Kid again? This time itâ€™s a black card.</em></p>
        </div>
      </div>

      <div class="dialogue right">
        <img src="images/conan.png" alt="Conan" class="char-face">
        <div class="speech">
          <div class="char-name conan">Conan</div>
          <p><em>â€œIf youâ€™ve seen the light, now look into the darkness.â€ â€¦I see. Another challenge.</em></p>
        </div>
      </div>
    </div>

    <!-- ğŸ’Œ Kidâ€™s Challenge -->
    <div class="letter">
      <h2>ğŸ’Œ Notice from Kaito Kid</h2>
      <p>If you have seen the light, then look into the darkness.<br>
      Only those who cross the black vortex at the edge of the universe may arrive.</p>
      <p>Pass through every <strong>black hole</strong>.<br>
      But do not be deceived by the light of the stars or the moon â€”<br>
      they are mere illusions of the observer.</p>
      <p>â€• The Magician under the Moonlight ğŸŒ™</p>
    </div>

    <p>On the table lay a strange maze where light and shadow intertwined.<br>
    Scattered within were swirling black vortices â€” black holes.</p>

    <div class="scene-visual" style="background-image:url('images/bg_table_lab.jpg');">
      <div class="dialogue left">
        <img src="images/agasa.png" alt="Agasa" class="char-face">
        <div class="speech">
          <div class="char-name agasa">Agasa</div>
          <p><em>Hmmâ€¦ A maze of light and darkness, huh? Which way should we go?</em></p>
        </div>
      </div>

      <div class="dialogue left">
        <img src="images/haibara.png" alt="Haibara" class="char-face">
        <div class="speech">
          <div class="char-name haibara">Haibara</div>
          <p><em>There are suns and moons here tooâ€¦ what could they mean?</em></p>
        </div>
      </div>

      <div class="dialogue right">
        <img src="images/conan.png" alt="Conan" class="char-face">
        <div class="speech">
          <div class="char-name conan">Conan</div>
          <p><em>It says â€œDonâ€™t be deceived.â€ The path must go through only the black vortices.</em></p>
        </div>
      </div>
    </div>

    <!-- ğŸ§­ Rules -->
    <div class="rules-card">
      <h3>ğŸ§­ Rules</h3>
      <ul>
        <li>Find a path from START to GOAL.</li>
        <li>You must pass through <strong>every black hole</strong>.</li>
        <li>Do <strong>not</strong> pass through the Sun or Moon (light symbols).</li>
	<li>The same black hole cannot be passed through more than once. Paths cannot overlap.</li>
        <li>You may only move in straight paths â€” no crossing walls.</li>
      </ul>
      <p>Follow the correct route, and a <strong>word</strong> will appear.</p>
    </div>

    <div class="puzzle-image">
      <img src="images/puzzle5_en.png" alt="Black hole maze puzzle" />
    </div>

    <!-- âœï¸ Input -->
    <div class="controls">
      <input type="text" id="answer" placeholder="Enter your answerâ€¦" />
      <button class="btn btn-primary" onclick="checkAnswer5()">Submit</button>
      <button class="btn btn-hint" onclick="showHint5()">Hint</button>
      <button class="btn btn-answer" onclick="showAnswer5()">Show Answer</button>
    </div>

    <p id="message"></p>
    <p id="hint" class="hint"></p>

    <!-- âœ… Explanation -->
    <div id="explanation" class="explain" style="display:none;">
      <div class="puzzle-image">
        <img src="images/puzzle5_en_answer.png" alt="Maze path forming the word TRUTH" />
      </div>

      <div class="scene-visual" style="background-image:url('images/bg_lightbeam.jpg');">
        <div class="dialogue left">
          <img src="images/conan.png" alt="Conan" class="char-face">
          <div class="speech">
            <div class="char-name conan">Conan</div>
            <p>Passing through every black holeâ€¦ the path reveals a single word â€” <strong>TRUTH</strong>.</p>
          </div>
        </div>

        <div class="dialogue right">
          <img src="images/mitsuhiko.png" alt="Mitsuhiko" class="char-face">
          <div class="speech">
            <div class="char-name mitsuhiko">Mitsuhiko</div>
            <p>Wait..."There is always only one TRUTH!"....Thatâ€™s Conanâ€™s motto!</p>
          </div>
        </div>

        <div class="dialogue left">
          <img src="images/genta.png" alt="Genta" class="char-face">
          <div class="speech">
            <div class="char-name genta">Genta</div>
            <p>Heh, guess we really are detectives after all!</p>
          </div>
        </div>

        <div class="dialogue right">
          <img src="images/haibara.png" alt="Haibara" class="char-face">
          <div class="speech">
            <div class="char-name haibara">Haibara</div>
            <p>â€¦Heh. So thatâ€™s what this puzzle was leading us to all along.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ğŸŒ™ Ending -->
    <div id="ending" style="display:none;">
      <p>The white silhouette of a cape shimmered once more against the ceiling.</p>
      <div class="scene-visual" style="background-image:url('images/bg_kid_shadow.jpg');">
        <div class="dialogue left">
          <img src="images/kid.png" alt="Kaito Kid" class="char-face">
          <div class="speech">
            <div class="char-name kid">Kaito Kid</div>
            <p>Those who look into the unseen will find the answerâ€¦ though I must admit, Iâ€™m tired of hearing your catchphrase.</p>
          </div>
        </div>

        <div class="dialogue right">
          <img src="images/conan.png" alt="Conan" class="char-face">
          <div class="speech">
            <div class="char-name conan">Conan</div>
            <p>â€¦A catchphrase, huh? Youâ€™re wrong. Itâ€™s not a phrase â€” itâ€™s my conviction.</p>
          </div>
        </div>

        <div class="dialogue left">
          <img src="images/agasa.png" alt="Agasa" class="char-face">
          <div class="speech">
            <div class="char-name agasa">Agasa</div>
            <p>Hahaha! Thatâ€™s the pride of a true detective!</p>
          </div>
        </div>

        <div class="dialogue right">
          <img src="images/haibara.png" alt="Haibara" class="char-face">
          <div class="speech">
            <div class="char-name haibara">Haibara</div>
            <p>Conan, are youâ€¦ a little angry?</p>
          </div>
        </div>

        <div class="dialogue center">
          <img src="images/conan.png" alt="Conan (inner voice)" class="char-face">
          <div class="speech">
            <div class="char-name conan">Conan (inner voice)</div>
            <p><em>Light or darkness â€” whatever lies beyond, Iâ€™ll see it with my own eyes.</em></p>
          </div>
        </div>
      </div>

      <div class="next">
        <a href="puzzle6_en.html">â–¶ Next Episode: The Law of Direction</a>
      </div>
    </div>
  </div>

  <script src="js/common.js"></script>
  <script>
    // ==== Puzzle 5 Script ====
    const hints5 = [
      "ğŸ’¡ Hint 1: Pass through all black holes. Avoid the Sun and Moon symbols.",
      "ğŸŒ€ Hint 2: You can only move in straight paths. Thereâ€™s a single continuous route that connects all vortices.",
      "ğŸŒ™ Hint 3: When you reach the goal, 5 letters appear â€” the detectiveâ€™s creed."
    ];

    function showHint5() {
      showHint(hints5);
    }

    function checkAnswer5() {
      const input = document.getElementById('answer').value.trim().toUpperCase();
      const msg = document.getElementById('message');
      if (!input) {
        msg.style.color = '#ccc';
        msg.textContent = 'Please enter your answer.';
        return;
      }
      if (["TRUTH"].includes(input)) {
        msg.style.color = '#00ffcc';
        msg.textContent = 'ğŸ‰ Correct! Beyond the darkness, youâ€™ve found what every detective seeks â€” the TRUTH!';
        setTimeout(revealExplanation, 1200);
      } else {
        msg.style.color = '#ff6666';
        msg.textContent = 'Not yetâ€¦ you havenâ€™t seen what lies beyond the darkness.';
      }
    }

    function showAnswer5() {
      kidReveal([
        "ğŸ©ã€Hehâ€¦ You made it through the darkness.ã€",
        "ğŸ’«ã€But thatâ€™s only the visible answer.ã€",
        "ğŸŒ™ã€Or as youâ€™d sayâ€¦ â€œThere is only one TRUTH.â€ã€"
      ]);
    }
  </script>
</body>
</html>

